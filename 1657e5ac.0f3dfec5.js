(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{150:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var o=n(0),r=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),p=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},f=r.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=p(n),f=o,m=d["".concat(c,".").concat(f)]||d[f]||u[f]||a;return n?r.a.createElement(m,i(i({ref:t},l),{},{components:n})):r.a.createElement(m,i({ref:t},l))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,c=new Array(a);c[0]=f;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,c[1]=i;for(var l=2;l<a;l++)c[l]=n[l];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},59:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return p}));var o=n(2),r=n(6),a=(n(0),n(150)),c={id:"cli_process",title:"CLI (Command Line Interface)",sidebar_label:"CLI"},i={unversionedId:"packages/npm/scaffolding-cli/cli_process",id:"packages/npm/scaffolding-cli/cli_process",isDocsHomePage:!1,title:"CLI (Command Line Interface)",description:"CLI extensions process",source:"@site/docs/packages/npm/scaffolding-cli/cli_process.md",slug:"/packages/npm/scaffolding-cli/cli_process",permalink:"/stacks/docs/packages/npm/scaffolding-cli/cli_process",editUrl:"https://github.com/amido/stacks/docs/packages/npm/scaffolding-cli/cli_process.md",version:"current",sidebar_label:"CLI",sidebar:"docs",previous:{title:"Publishing Packages",permalink:"/stacks/docs/packages/npm/publishing"},next:{title:"scaffolding-cli",permalink:"/stacks/docs/packages/npm/scaffolding-cli/scaffolding_cli"}},s=[{value:"CLI extensions process",id:"cli-extensions-process",children:[{value:"Config object",id:"config-object",children:[]}]}],l={rightToc:s};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"cli-extensions-process"},"CLI extensions process"),Object(a.b)("h3",{id:"config-object"},"Config object"),Object(a.b)("p",null,"The cli process takes in either a config object or CLI answers that construct the same object."),Object(a.b)("p",null,"Based on the answers/config the process goes through a certain selection process."),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-json"}),'{\n  "projectName": "test-app-1",\n  "projectType": "ssr",\n  "platform": "aks",\n  "deployment": "azdevops"\n}\n')),Object(a.b)("p",null,"Initial version of the options above, the mapping is created by taking the below params"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"let determinedChoice = ${selection.projectType}_${selection.platform}_${selection.deployment}")),Object(a.b)("p",null,"The prompt class handles all this and simply hands over to the workers which dynamically select the flow."),Object(a.b)("p",null,"The FlowSelector class is where users need to implement extensions for their own implementation, you do this by creating a static method and also needs to be added ",Object(a.b)("inlineCode",{parentName:"p"},"WorkflowOptions")," inside the models/workflow.ts"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-javascript"}),"function WorkflowOptions(): Workflow {\n    return {\n        ssr_aks_azdevops: FlowSelector.option_ssr_aks_azuredevops,\n        ${selection.projectType}_${selection.platform}_${selection.deployment}: FlowSelection.MyMappedFunction\n    }\n}\n")),Object(a.b)("p",null,"The implementation is down to user to implement generally this is a process of selecting folder structure based on your new additional logic."),Object(a.b)("p",null,"Utils class holds helper methods for operations with FS, such as create a copy of templates in ",Object(a.b)("inlineCode",{parentName:"p"},"tmpdir")," (OS agnostic) and then moving relevant items based on ",Object(a.b)("inlineCode",{parentName:"p"},"FolderMap")," defined within the static mappers method."),Object(a.b)("p",null,"WorkerMap in the config allows each method bound to a specific flow to define a folder mapping from template to output as well as a file mapping used for replacement."),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-javascript"}),'[\n  {\n      files: ["**/*.md"], // files accept a glob pattern\n      values: { // key value mapping for\n          "PROJECT_NAME": projectName\n      }\n  }\n]\n')))}p.isMDXComponent=!0}}]);