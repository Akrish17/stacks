<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">Project Structure | Amido Stacks</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Project Structure | Amido Stacks"><meta data-react-helmet="true" name="description" content="Projects in the solution"><meta data-react-helmet="true" property="og:description" content="Projects in the solution"><meta data-react-helmet="true" property="og:url" content="https://amido.github.io/stacks/docs/workloads/netcore/project_structure/project_structure_netcore"><link data-react-helmet="true" rel="shortcut icon" href="/stacks/img/thumbnail_stacks.png"><link data-react-helmet="true" rel="canonical" href="https://amido.github.io/stacks/docs/workloads/netcore/project_structure/project_structure_netcore"><link rel="stylesheet" href="/stacks/styles.addbe53e.css">
<link rel="preload" href="/stacks/styles.a9aa97cb.js" as="script">
<link rel="preload" href="/stacks/runtime~main.07fe97c7.js" as="script">
<link rel="preload" href="/stacks/main.07e3b808.js" as="script">
<link rel="preload" href="/stacks/1.708654f4.js" as="script">
<link rel="preload" href="/stacks/2.fc96d4af.js" as="script">
<link rel="preload" href="/stacks/3.c611d954.js" as="script">
<link rel="preload" href="/stacks/1be78505.4bc75bd4.js" as="script">
<link rel="preload" href="/stacks/81.27d21960.js" as="script">
<link rel="preload" href="/stacks/935f2afb.6e42c6a8.js" as="script">
<link rel="preload" href="/stacks/17896441.048ebb65.js" as="script">
<link rel="preload" href="/stacks/8f59da85.8187627d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/stacks/"><img class="navbar__logo" src="/stacks/img/logo.svg" alt="Amido Stacks Logo"><strong class="navbar__title">Amido Stacks</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/stacks/docs/">Docs</a><a href="https://github.com/amido/stacks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/stacks/"><img class="navbar__logo" src="/stacks/img/logo.svg" alt="Amido Stacks Logo"><strong class="navbar__title">Amido Stacks</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/stacks/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/amido/stacks" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/">About Amido Stacks</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Build the application</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/getting_started_demo">Using the scaffolding-cli to build an application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/getting_started_dev">Dev [Node.js]- Using the repo to build the Node.js application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/getting_started_dev_java">Dev [Java] - Using the repo to build the Java application locally</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/getting_started_dev_dotnet">Dev [Dotnet] - Using the repo to build the Dotnet application locally</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Workloads</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stacks/docs/workloads/workloads">Workloads</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Frontend Web Applications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/intro_node_js">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/ide_node_js">IDE Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/environment_variables_nodejs">Enviroment Variables</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/cli_webapp_frameworks">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/monorepo">Stacks Monorepo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/browser_support">Browser Support</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/server_side_cache">Server Side Cache</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Java Spring Boot REST API Application</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/intro_java">Introduction to the Java REST API application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/quickstart_java">Getting started with the Java Rest API application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/scaffolding_java">Using the Scaffolding CLI to create the Java Rest API project template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/ide_java">IDE guidelines for the Java Rest API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/structure_java">Java Rest API Structure and Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/testing_java">Testing the Java Rest API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/end_to_end_testing_java">End to end automation testing</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">.NET Core REST API Application</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stacks/docs/workloads/netcore/introduction_netcore">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/netcore/quickstart/requirements_netcore">Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/netcore/quickstart/create_project_netcore">Create the project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/netcore/quickstart/configure_project_netcore">Configure the project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/netcore/quickstart/build_and_run_project_netcore">Build &amp; Run the Project</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Test</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/netcore/quickstart/testing/functional_testing_netcore">Functional testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/netcore/quickstart/testing/performance_testing_netcore">Performance testing</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/netcore/quickstart/deploy_project_netcore">Deployment</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Swagger Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/netcore/quickstart/swagger_configuration/configure_swagger_netcore">Swagger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/netcore/quickstart/swagger_configuration/configure_swagger_ui_netcore">Swagger UI</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stacks/docs/workloads/netcore/logging_netcore">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stacks/docs/workloads/netcore/security_netcore">Security</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stacks/docs/workloads/netcore/project_structure/architecture_overview_netcore">Architecture Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stacks/docs/workloads/netcore/project_structure/repository_overview_netcore">Repository</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/stacks/docs/workloads/netcore/project_structure/project_structure_netcore">Project Structure</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Infrastructure</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Azure</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/infrastructure/azure/infrastructure_code">Infrastructure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/infrastructure/azure/pipeline_templates">Pipeline Templates</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/testing/testing">Testing and quality</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/testing/cli_testing_frameworks">Project Types - Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/testing/testing_serenity_bdd">E2E Serenity BDD Java</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/testing/testing_static">Static Code Analysis</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Packages</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/packages">Packages</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">npm</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/npm/publishing">Publishing Packages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/npm/scaffolding-cli/cli_process">CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/npm/scaffolding-cli/scaffolding_cli">scaffolding-cli</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">nuget</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/nuget/publishing_nuget">Publishing NuGet Packages</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">maven</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/maven/dependency_management">Dependencies and Version Management</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Support</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/support/faq">FAQ</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Project Structure</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="projects-in-the-solution"></a>Projects in the solution<a aria-hidden="true" tabindex="-1" class="hash-link" href="#projects-in-the-solution" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">SolutionÂ &#x27;xxAMIDOxx.xxSTACKSss.API&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€Â API</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â Â Â Â Â â”œâ”€â”€Â xxAMIDOxx.xxSTACKSxx.API</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â Â Â Â Â â”œâ”€â”€Â xxAMIDOxx.xxSTACKSxx.API.Models</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â Â Â Â Â â””â”€â”€Â xxAMIDOxx.xxSTACKSxx.API.ContractTests</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€Â Application</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â Â Â Â Â â”œâ”€â”€Â xxAMIDOxx.xxSTACKSxx.Application.CommandHandlers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â Â Â Â Â â”œâ”€â”€Â xxAMIDOxx.xxSTACKSxx.Application.Integration</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â Â Â Â Â â”œâ”€â”€Â xxAMIDOxx.xxSTACKSxx.Application.QueryHandlers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€Â Domain</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â Â Â Â Â â”œâ”€â”€Â xxAMIDOxx.xxSTACKSxx.Domain</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â Â Â Â Â â””â”€â”€Â External</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€Â Shared</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â Â Â Â Â â”œâ”€â”€Â xxAMIDOxx.xxSTACKSxx.Common</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚Â Â Â Â Â Â â””â”€â”€Â xxAMIDOxx.xxSTACKSxx.CQRS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€â”€Â Tests</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Â Â Â Â Â Â Â â”œâ”€â”€Â xxAMIDOxx.xxSTACKSxx.API.ComponentTests</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Â Â Â Â Â Â Â â”œâ”€â”€Â xxAMIDOxx.xxSTACKSxx.Common.UnitTests</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Â Â Â Â Â Â Â â”œâ”€â”€Â xxAMIDOxx.xxSTACKSxx.Domain.UnitTests</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Â Â Â Â Â Â Â â””â”€â”€Â xxAMIDOxx.xxSTACKSxx.Infrastructure.IntegrationTests</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="api"></a>API<a aria-hidden="true" tabindex="-1" class="hash-link" href="#api" title="Direct link to heading">#</a></h2><p>The API scope contains the components that are exposed publicly, like the APIs and it&#x27;s Models.</p><p>It also contains infrastructure components that is responsible to arrange all dependencies within the solution.</p><p>If the API wasn&#x27;t self-hosted, we could also add the WebHost to this scope to manage the hosting concerns of the API.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectapi"></a>Company.Project.API<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectapi" title="Direct link to heading">#</a></h3><p>The <strong>API</strong> project containing the controllers and swagger documentation. The purpose of the API project is expose the application via a set of REST\HTTP endpoints. The API will validate requests either by built-in validators using DataAnnotations attributes or using FluentValidation(not included in the template).</p><p>The API is a self hosted service using dotnet core kestrel and does not require any external web server. The hosting logic is handled by the Program.cs class.</p><p>The API depends on ICommandHandler and IQueryHandler abstractions and does not contain a direct reference to the command-handlers and query-handler projects to reduce coupling. The bridge between the interface abstraction and implementations will be provided by the infrastructure that maps the interfaces and implementations of many components, like the queries and commands handlers, repositories, caches and so on.</p><p>Having the constructor depending on abstractions also makes the API flexible for Contract Testing, where we would mock the interfaces and don&#x27;t require a dependency to the Application.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectmodels"></a>Company.Project.Models<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectmodels" title="Direct link to heading">#</a></h3><p>The <strong>Models</strong> exposed by the API have been pulled out of the API project to make them reusable. The models have it&#x27;s own validation using DataAnnotations, by using it, we can have a validation in the models without dependency on third party libraries like FluentValidation, that should be implemented only if needed.</p><ul><li><p>QA have demonstrated interest in reuse of Models to avoid duplication of code in API.Models and TestModels. The separate models project will make it easier to expose the models as NuGet packages for reuse by QA Functional Tests</p></li><li><p>A Client SDK can be create in the future to communicate with the API, having a reusable Model, makes it easy to write the SDK without rewriting them every time the API changes</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectinfrastructure"></a>Company.Project.Infrastructure<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectinfrastructure" title="Direct link to heading">#</a></h3><p>The infrastructure project is a cross cutting project responsible to tie the dependencies within the API and application, in general, the API talks to an Interface that abstracts away the need to have an implementation available at API design time, it need to know only the Commands, Queries available for each operation. The command and query handlers are implemented in their own projects and the API does not have a direct dependency on it. The infrastructure will be responsible to bridge the commands to handlers making the API decoupled from the implementation.</p><p>The same happens for other components, CommandHandlers does not have a direct dependency in the Repository implementation, they just expect an implementation to be injected at runtime, the real implementation will be managed by the Infrastructure in real environments or managed by test fixtures using Mocks or Stubs during test contexts.</p><p>In simple terms, the Infrastructure setup the IoC container with all dependencies needed to run the application.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="application"></a>Application<a aria-hidden="true" tabindex="-1" class="hash-link" href="#application" title="Direct link to heading">#</a></h2><p>The application scope contains the projects that will handle most of the application behavior and technical requirements but not the actual business logic of it, it will bridge the public API and the domain logic.</p><p>They are managed into separate projects to make Commands decoupled from the Queries, in a more advanced scenario, queries and commands could be handled within their own services, each service handling their own dependencies and the API would make HTTP or gRPC calls to these respective services.</p><p>In this solution, we have a single API handling commands and queries, And separate applications for handlers, this approach makes flexible to either:</p><p>Merge commands and query handler projects into a single &#x27;Company.Project.Application&#x27; project for simplicity (Integration should still be independent) and host within the API. (current usage)
Host commands separate from queries on their respective services and forward the calls from the APIs.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectapplicationcommandhandlers"></a>Company.Project.Application.CommandHandlers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectapplicationcommandhandlers" title="Direct link to heading">#</a></h2><p>The <strong>CommandHandlers</strong> contains implementations of ICommandHandler interface. Each handler expect it&#x27;s own command type and handles it&#x27;s own logic.</p><p>Command Handlers orchestrate the dependencies of a commands before it is applied to a Domain object, a few common features of a handler are:</p><p>Ask the repository for the data used in the domain object, so that an operation(command) can be applied to it</p><p>Act in the domain and send the data to be handled.</p><p>Ensure the domain changes are persisted to DB by sending the domain object back to the repository to be saved</p><p>Publish related application events(not domain events) to the event hub (i.e: Kafka or Service Bus Topic)</p><p>Call external dependencies if needed, like dependent services using a gateway.</p><p>Handle non business logic, like:</p><p>Ensure an object exists before executing the operations</p><p>Ensure an operation are valid against a domain object(i.e: security check)</p><p>Load configuration</p><p>Command handlers should not handle business logic. i.e:</p><p>If an operation can only be executed if the domain is in a specific state or has a determined value, the condition checks should be evaluated within the domain.</p><p>If the business rules condition requires data from source outside the domain, i.e database, services, etc, then a domain service should be created to handle the logic like load the rules from a gateway and execute the check before the entity is changed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectapplicationqueryhandlers"></a>Company.Project.Application.QueryHandlers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectapplicationqueryhandlers" title="Direct link to heading">#</a></h3><p>The <strong>QueryHandlers</strong> contains the implementations of IQueryHandler interface. Each IQueryHandler expect a QueryCriteria and return a QueryModel as the query result.</p><p>Similar to CommandHandlers, the QueryHandlers are responsible to orchestrate the dependencies of a query, on some cases, a query might span multiple components or external services, the query handlers provides:</p><p>Handle or delegate the mapping from domain data to query models</p><p>Call repository(storage) or search provider to gather the data</p><p>Ensure the user has permission to execute the operation</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectapplicationintegration"></a>Company.Project.Application.Integration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectapplicationintegration" title="Direct link to heading">#</a></h3><p>The <strong>Integration</strong> project contains contracts(Interfaces) that must be <strong>implemented by other assemblies</strong> to provide capabilities to the application, contracts like IMenuRepository should be created in this project and implemented in the Infrastructure project. This approach will prevent a chain of unnecessary dependencies between projects and most specifically the Application. For example:</p><p>CommandHandler depends on IMenuRepository, the implementation of IRepository is done in the Infrastructure</p><p>QueryHandlers can also have a dependency on IMenuRepository, that will use the same implementation from Infrastructure, if it were created in either of them, one would have a dependency to the other.</p><p>If either CommandHandlers or QueryHandlers have a dependency on external services, we could implement a gateway, this gateway would be an interface with the operations we need and the <strong>implementation must be done outside of the integration project</strong> to avoid direct dependencies to packages not required by the application. The gateways could either be implemented in the Infrastructure for services we have total control, similar to what we do for repository implementations, but for <strong>external dependencies it should be implemented by an ACL (Anti Corruption Layer)</strong>. The ACL approach is the best scenario, given it leaves each dependency on their respective projects and reduce the dependencies within the scope of the application and infrastructure. (See ACL for more details)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="domain"></a>Domain<a aria-hidden="true" tabindex="-1" class="hash-link" href="#domain" title="Direct link to heading">#</a></h2><p>The Domain scope is where the business logic lives in, when a feature is implemented, the business conditions that drives the feature are placed within the domain boundary. In BDD, the domain boundary is called Bounded context. It is the term used to group a set of features that are correlated to accomplish a set of operations that should live together.</p><p>In a micro services solution, each service will likely map to a single bounded context. In an e-commerce solution, we could describe bounded contexts like Catalog, Checkout, Stock, and so on.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectdomain"></a>Company.Project.Domain<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectdomain" title="Direct link to heading">#</a></h3><p>The domain project will hold the components that maps to a business domain and their respective dependencies.</p><p>In an e-Commerce solution, we would have bounded context, let&#x27;s say Catalog, and the catalog can have Products, Prices, Categories and so on. These could be defined in the domain as AggregateRoot, Entities or ValueObjects, all these definitions should be created in the domain project according to the Design decisions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="external"></a>External<a aria-hidden="true" tabindex="-1" class="hash-link" href="#external" title="Direct link to heading">#</a></h2><p>The external scope contains projects that provides features provided by external dependencies, like other services or third party solutions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="aclanti-corruption-layer"></a>ACL(Anti Corruption Layer)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#aclanti-corruption-layer" title="Direct link to heading">#</a></h3><p>TODO: Implement an ACL project to demonstrate the use of ACL</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="shared"></a>Shared<a aria-hidden="true" tabindex="-1" class="hash-link" href="#shared" title="Direct link to heading">#</a></h2><p>Share scope are projects that contains items reused across multiple projects, items like Exceptions, ExceptionsIds, OperationIds, Commands, Queries, and so on.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectcommon"></a>Company.Project.Common<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectcommon" title="Direct link to heading">#</a></h3><p>Common items are items that can and should be reused by multiple projects to avoid code duplication and reduce complexity by avoiding mappings and conversions. Exceptions and Operations are some of the common items that can be available to all projects.</p><p>Exceptions in the application should be a shared concern and every layer should understand it properly, having one exception that sis know by all layers will reduce the complexity of mapping these exceptions and adding unnecessary try/catch blocks to raise new exceptions when needed an exception is propagated.</p><p>Operations similar to exceptions, should have unique ids that are common to all layers, an API receive a model that will map to a command, this command should have it&#x27;s own id to be easy to diagnostics failures between the layers.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectcqrs"></a>Company.Project.CQRS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectcqrs" title="Direct link to heading">#</a></h3><p>CQRS contains POCO classes used between API and Application layer to pass commands and queries between each other.</p><p>The Commands and Queries are separate from the handlers to reduce the coupling between API and Application.</p><p>Like the decoupling from API, it also contains the Application Events raised within the application to be consumed by other components or services.</p><p>CQRS should not contain any logic and is used just to provide classes that are consumed outside the application boundary.</p><p>Tests
The tests scope contains all tests that covers the application code via white box method, that means, tests that are run from inside out with access to the code and testing the behavior of the code.</p><p>Each set of tests will have a level of coverage and different level of details.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectapicomponenttests"></a>Company.Project.API.ComponentTests<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectapicomponenttests" title="Direct link to heading">#</a></h3><p>The <strong>ComponentTests</strong> covers the overall service from edge to edge without external dependencies. It starts at the API endpoints and finishes before the last service layer makes a call to a external dependency.</p><p>Resources like Repositories and gateway are mocked to provide dummy or fake the behavior expected by the application(or not) in order to test multiple usage scenarios of the application.</p><p>API are(should be) also covered by Contract Tests, we might see the coverage of APIs by Component Tests as redundant tests. Component tests could skip the coverage of the API and cover from the application (commands and queries) layer to the service boundary(repositories and gateways), but this approach would require us to create an extra test assert the integration between API and Application works as expected, giving us on extra test to maintain.</p><p>Component tests are similar to functional tests, both are testing features of the system with one caveat, Functional Tests asserts a functionality by providing an Input and expecting an output according to the input provided, it does not(should not) care how the output is generated, ComponentT test on the other hand assert that an input returns an expected output and also ensure a set of expectations are met. i.e: Events are raised by the application, calls to external services are handled accordingly data are formatted correctly when passed to external components.</p><p>Component Tests can also be referred as Module Tests, Assembly Tests, Service Tests.</p><p>For component tests details please refer to Test Definitions</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectcommonunittests"></a>Company.Project.Common.UnitTests<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectcommonunittests" title="Direct link to heading">#</a></h3><p>Unit tests for x.y.Common project. For unit tests details please refer to Test Definitions</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectdomainunittests"></a>Company.Project.Domain.UnitTests<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectdomainunittests" title="Direct link to heading">#</a></h3><p>Unit tests for x.y.Domain project. For unit tests details please refer to Test Definitions</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectinfrastructureintegrationtests"></a>Company.Project.Infrastructure.IntegrationTests<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectinfrastructureintegrationtests" title="Direct link to heading">#</a></h3><p>Integration tests is a level of test focused on testing the interaction of two or more components and identify if their work well together, even though you might have already Unit Test coverage of each component individually.</p><p>Integration tests are needed because in many cases the component can work properly when running independently but fail when interacting to each components. In a unit test they work properly because we mock the dependencies with assumptions that might not be true, and could be only be identified at runtime.</p><p>In this solution we already do integration tests between internal components either via Component Tests, where it tests the integration between APIâ†’ Application â†’ Domain, or via Functional Tests, testing the system as a black box, and each interaction with the API will also assert the integration between APIâ†’ Application â†’ Domain â†’ Repository â†’ Database.</p><p>The limitation of component tests is that bugs outside the scope of test are not identified until the application is deployed to a valid environment and tested with functional tests.</p><p>The limitation of functional tests is that it is time consuming to create and maintain. Also, functional tests are slow because it requires a deployment of the application to be evaluated.</p><p>Integration tests bridges the gap between Component Tests and Functional Tests by covering just the integration boundaries not tested by the component tests.</p><p>The Integration Tests implemented in the scope of this solution does not focus on testing configuration(i.e: test if a deployed service can talk to a database), the focus of this test is to test the implementation behavior between the edge components and their respective dependencies, like repositories and gateways, examples of tests we want do with integration testes are:</p><p>Check if the data we pass to a database is keeps the format when saved and retrieved. i.e: decimal places, text encoding, valid length,</p><p>Check if a request to a external service is valid by providing the right data, http headers liek authentication header, url path, and so one.</p><p>Check if a value is cached correctly when retrieved from an external storage.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="companyprojectapicontracttests"></a>Company.Project.API.ContractTests<a aria-hidden="true" tabindex="-1" class="hash-link" href="#companyprojectapicontracttests" title="Direct link to heading">#</a></h3><p>Contract tests cover testing of the API contracts between the provider of an API service and the consumer of the API service. Documentation for contract testing can be found within the following documentation:</p><p>Testing Scope [Ready For Review]</p><p>Consumer-Driven Contract Testing</p><p>What Is: Consumer Driven Contract Testing [Draft]</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="dependencies"></a>Dependencies<a aria-hidden="true" tabindex="-1" class="hash-link" href="#dependencies" title="Direct link to heading">#</a></h2><p>Amido Stacks Packages</p><p><strong>TODO</strong>: List shared packages in the project and their role</p><p>Nuget Packages</p><p><strong>TODO</strong>: List main NuGet packages used in the project and their role</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="things-to-avoid"></a>Things to Avoid<a aria-hidden="true" tabindex="-1" class="hash-link" href="#things-to-avoid" title="Direct link to heading">#</a></h2><p>Dependencies</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">opt for Adapter or Facade instead of Services</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/amido/stacks/docs/workloads/netcore/project_structure/project_structure_netcore.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/stacks/docs/workloads/netcore/project_structure/repository_overview_netcore"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Repository Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/stacks/docs/infrastructure/azure/infrastructure_code"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Infrastructure Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#projects-in-the-solution" class="table-of-contents__link">Projects in the solution</a></li><li><a href="#api" class="table-of-contents__link">API</a><ul><li><a href="#companyprojectapi" class="table-of-contents__link">Company.Project.API</a></li><li><a href="#companyprojectmodels" class="table-of-contents__link">Company.Project.Models</a></li><li><a href="#companyprojectinfrastructure" class="table-of-contents__link">Company.Project.Infrastructure</a></li></ul></li><li><a href="#application" class="table-of-contents__link">Application</a></li><li><a href="#companyprojectapplicationcommandhandlers" class="table-of-contents__link">Company.Project.Application.CommandHandlers</a><ul><li><a href="#companyprojectapplicationqueryhandlers" class="table-of-contents__link">Company.Project.Application.QueryHandlers</a></li><li><a href="#companyprojectapplicationintegration" class="table-of-contents__link">Company.Project.Application.Integration</a></li></ul></li><li><a href="#domain" class="table-of-contents__link">Domain</a><ul><li><a href="#companyprojectdomain" class="table-of-contents__link">Company.Project.Domain</a></li></ul></li><li><a href="#external" class="table-of-contents__link">External</a><ul><li><a href="#aclanti-corruption-layer" class="table-of-contents__link">ACL(Anti Corruption Layer)</a></li></ul></li><li><a href="#shared" class="table-of-contents__link">Shared</a><ul><li><a href="#companyprojectcommon" class="table-of-contents__link">Company.Project.Common</a></li><li><a href="#companyprojectcqrs" class="table-of-contents__link">Company.Project.CQRS</a></li><li><a href="#companyprojectapicomponenttests" class="table-of-contents__link">Company.Project.API.ComponentTests</a></li><li><a href="#companyprojectcommonunittests" class="table-of-contents__link">Company.Project.Common.UnitTests</a></li><li><a href="#companyprojectdomainunittests" class="table-of-contents__link">Company.Project.Domain.UnitTests</a></li><li><a href="#companyprojectinfrastructureintegrationtests" class="table-of-contents__link">Company.Project.Infrastructure.IntegrationTests</a></li><li><a href="#companyprojectapicontracttests" class="table-of-contents__link">Company.Project.API.ContractTests</a></li></ul></li><li><a href="#dependencies" class="table-of-contents__link">Dependencies</a></li><li><a href="#things-to-avoid" class="table-of-contents__link">Things to Avoid</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/stacks/docs/">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">About Us</h4><ul class="footer__items"><li class="footer__item"><a href="https://amido.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Amido</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Open Source</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/amido/stacks" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Amido Ltd</div></div></div></footer></div>
<script src="/stacks/styles.a9aa97cb.js"></script>
<script src="/stacks/runtime~main.07fe97c7.js"></script>
<script src="/stacks/main.07e3b808.js"></script>
<script src="/stacks/1.708654f4.js"></script>
<script src="/stacks/2.fc96d4af.js"></script>
<script src="/stacks/3.c611d954.js"></script>
<script src="/stacks/1be78505.4bc75bd4.js"></script>
<script src="/stacks/81.27d21960.js"></script>
<script src="/stacks/935f2afb.6e42c6a8.js"></script>
<script src="/stacks/17896441.048ebb65.js"></script>
<script src="/stacks/8f59da85.8187627d.js"></script>
</body>
</html>