<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Infrastructure · Amido Stacks</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;!--"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Infrastructure · Amido Stacks"/><meta property="og:type" content="website"/><meta property="og:url" content="https://amido.github.io/stacks/"/><meta property="og:description" content="&lt;!--"/><meta name="twitter:card" content="summary"/><meta name="robots" content="noindex"/><link rel="shortcut icon" href="/stacks/"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script src="/stacks/js/scrollSpy.js"></script><link rel="stylesheet" href="/stacks/css/main.css"/><script src="/stacks/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/stacks/"><h2 class="headerTitle">Amido Stacks</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/stacks/docs/" target="_self">Docs</a></li><li class=""><a href="https://github.com/amido/stacks" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Azure</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/stacks/docs/">About Amido Stacks</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Build the application</h4><ul><li class="navListItem"><a class="navItem" href="/stacks/docs/getting_started_demo">Using the scaffolding-cli to build an application</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/getting_started_dev">Dev [Node.js]- Using the repo to build the Node.js application</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/getting_started_dev_java">Dev [Java] - Using the repo to build the Java application locally</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/getting_started_dev_dotnet">Dev [Dotnet] - Using the repo to build the Dotnet application locally</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Workloads<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/stacks/docs/workloads/workloads">Workloads</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Frontend Web Applications</h4><ul><li class="navListItem"><a class="navItem" href="/stacks/docs/workloads/frontend/browser_support">Browser Support</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/workloads/frontend/cli_webapp_frameworks">Project Types - Web applications</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/workloads/frontend/monorepo">Stacks Monorepo</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/workloads/frontend/server_side_cache">Server Side Cache</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Java Spring Boot REST API Application</h4><ul><li class="navListItem"><a class="navItem" href="/stacks/docs/workloads/java/intro_java">Introduction to the Java REST API application</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/workloads/java/quickstart_java">Getting started with the Java Rest API application</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/workloads/java/scaffolding_java">Using the Scaffolding CLI to create the Java Rest API project template</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/workloads/java/ide_java">IDE guidelines for the Java Rest API</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/workloads/java/structure_java">Java Rest API Structure and Architecture</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/workloads/java/testing_java">Testing the Java Rest API</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Infrastructure<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Azure</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/stacks/docs/infrastructure/azure/infrastructure_code">Infrastructure</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/infrastructure/azure/pipeline_templates">Pipeline Templates</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Testing<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/stacks/docs/testing/testing">Testing and quality</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/testing/cli_testing_frameworks">Project Types - Testing</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/testing/testing_serenity_bdd">E2E Serenity BDD Java</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/testing/testing_static">Static Code Analysis</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Packages<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/stacks/docs/packages/packages">Packages</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">npm</h4><ul><li class="navListItem"><a class="navItem" href="/stacks/docs/packages/npm/publishing">Publishing Packages</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/packages/npm/scaffolding-cli/cli_process">CLI</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/packages/npm/scaffolding-cli/scaffolding_cli">scaffolding-cli</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">nuget</h4><ul><li class="navListItem"><a class="navItem" href="/stacks/docs/packages/nuget/publishing_nuget">Publishing NuGet Packages</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">maven</h4><ul><li class="navListItem"><a class="navItem" href="/stacks/docs/packages/maven/dependency_management">Dependencies and Version Management</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Support<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/stacks/docs/support/faq">FAQ</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Infrastructure</h1></header><article><div><span><!--
Ensure we put in lots of information about our Infrastructure. Including:
<blockquote>
<p>What is the data flow through configuration? Beginning to end. Hierarchical model.
** Compile time
** Run time
** Server only
** Client only
--&gt;</p>
</blockquote>
<p>All infrastructure tooling is done with <a href="https://www.terraform.io/">Terraform</a>, as a method for implementing our infrastructure as code. Terraform uses workspaces as the main mechanism of segregating states.</p>
<h2><a class="anchor" aria-hidden="true" id="terraform"></a><a href="#terraform" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Terraform</h2>
<p>All the modules used by stacks are documented and maintained <a href="https://github.com/amido/stacks-terraform">here</a></p>
<h3><a class="anchor" aria-hidden="true" id="recommended-usage"></a><a href="#recommended-usage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recommended Usage</h3>
<p>workspaces...</p>
<p>Optionally create feature based environments by passing...</p>
<h2><a class="anchor" aria-hidden="true" id="bootstrap-the-azure-tenant"></a><a href="#bootstrap-the-azure-tenant" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bootstrap the Azure tenant</h2>
<p>The first step is to create the Azure tenant and subscription by creating a SPN service account and a storage account for terraform state. This process only needs to be run once run once on an administrators workstation.</p>
<p>The administrator will need the following permissions:</p>
<ul>
<li>Azure AD &quot;Global Administrator&quot; role for the Azure AD Tenant</li>
<li>IAM subscription owner</li>
</ul>
<p>With owner privileges:</p>
<ol>
<li>Create a <a href="https://azure.microsoft.com/en-gb/services/storage/blobs/">Blob Storage instance</a></li>
<li>Take note of:
<ol>
<li>storage account name</li>
<li>blob name</li>
<li>ClientID</li>
<li>TenantID</li>
<li>SubscriptionId</li>
<li>ClientSecret</li>
</ol></li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="security-best-practice-recommendations"></a><a href="#security-best-practice-recommendations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Security best practice recommendations</h3>
<h4><a class="anchor" aria-hidden="true" id="azure"></a><a href="#azure" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Azure</h4>
<p>Terraform state - blob storage can be in a different subscription to your solution subscription - which is where your applications and their infra will live
The terraform state subscription should be locked to normal users (developers).</p>
<p>Users (AAD users) should have only a read-only access to the solution subscription dashboard.</p>
<p>When initialising terraform's backend you will use the tf state subscription credentials and for the provider you will use the solution credentials - this will be an SPN account's (`client/tenant/subscription_id and client_secret)</p>
<h3><a class="anchor" aria-hidden="true" id="resolving-lock-state"></a><a href="#resolving-lock-state" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolving lock state</h3>
<p>Either locally, or in the pipeline, if an error occurs like the following:</p>
<pre><code class="hljs css language-log">Error: <span class="hljs-builtin-name">Error</span> loading state: failed <span class="hljs-keyword">to</span> lock azure state: storage:<span class="hljs-built_in"> service </span>returned error: <span class="hljs-attribute">StatusCode</span>=409, <span class="hljs-attribute">ErrorCode</span>=LeaseAlreadyPresent, <span class="hljs-attribute">ErrorMessage</span>=There is already a<span class="hljs-built_in"> lease </span>present.
RequestId:REQUEST_ID
Time:0000-00-00T00:00:00.0000000Z, <span class="hljs-attribute">RequestInitiated</span>=Weekday, Day Month YYYY 00:00:00 GMT, <span class="hljs-attribute">RequestId</span>=0000000-0000-0000-0000-000000000000, API <span class="hljs-attribute">Version</span>=YYYY-MM-DD, <span class="hljs-attribute">QueryParameterName</span>=, QueryParameterValue=
Lock Info:
  ID:        0000000-0000-0000-0000-000000000000
  Path:      tfstate/amido-stacks-menuenv:amido-stacks-menu-test
  Operation: OperationTypeApply
  Who:       vsts@fv-az692
  Version:   0.00.00
  Created:   0000-00-00T00:00:00.0000000 +0000 UTC
  Info:      
</code></pre>
<p>We recommend resolving this through the CLI rather than the Portal interface.</p>
<pre><code class="hljs css language-bash">az storage blob lease <span class="hljs-built_in">break</span> -b <span class="hljs-variable">$KEY_NAME</span> -c <span class="hljs-variable">$BLOB_NAME</span> \
 --account-name <span class="hljs-variable">$STORAGE_ACC_NAME</span> --account-key <span class="hljs-variable">$STORAGE_ACC_KEY</span>
</code></pre>
<p>On success, exit code 0 to be returned.</p>
<h2><a class="anchor" aria-hidden="true" id="azure-devops-pipelines"></a><a href="#azure-devops-pipelines" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Azure Devops Pipelines</h2>
<p>See <a href="/stacks/docs/infrastructure/azure/pipeline_templates">Pipeline Templates</a> for more information about our open sourced steps.</p>
<h3><a class="anchor" aria-hidden="true" id="contributing"></a><a href="#contributing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributing</h3>
<h4><a class="anchor" aria-hidden="true" id="running-locally"></a><a href="#running-locally" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running Locally</h4>
<p>To test the deploy folder has been correctly provisioned prior to checking
you need to at this point in time copy over a sample backend-config and
terraform vars. Currently vars.tf and provider configuration is not
automatically updated. Future iterations will include this.</p>
<p>The safest way to run and maintain this going forward is to rely on environment
variables for credentials as that is the way the pipeline will trigger the
executions of terraform.</p>
<p>Sample export script with correct environment vars:</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment">#WINDOWS: comment out the lines below</span>
$ <span class="hljs-built_in">export</span> ARM_CLIENT_ID= \
ARM_CLIENT_SECRET= \
ARM_SUBSCRIPTION_ID= \
ARM_TENANT_ID=
<span class="hljs-comment">##########################################################</span>

<span class="hljs-comment">#WINDOWS: uncomment the following lines and fill in values</span>
<span class="hljs-comment"># Set-Variable -Name "ARM_CLIENT_ID" -Value ""</span>
<span class="hljs-comment"># Set-Variable -Name "ARM_CLIENT_SECRET" -Value ""</span>
<span class="hljs-comment"># Set-Variable -Name "ARM_SUBSCRIPTION_ID" -Value ""</span>
<span class="hljs-comment"># Set-Variable -Name "ARM_TENANT_ID" -Value ""</span>
<span class="hljs-comment">##########################################################</span>

$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"
vnet_id                 = \"amido-stacks-vnet-uks-dev\"
rg_name                 = \"amido-stacks-rg-uks-dev\"
resource_group_location = \"uksouth\"
name_company            = \"amido\"
name_project            = \"stacks\"
name_component          = \"spa\"
name_environment        = \"dev\"
"</span> &gt; <span class="hljs-variable">${YOUR_GIT_STACKS_WEB_APP_PATH}</span>/stacks-webapp-template/deploy/terraform/azure/backend.local.tfvars
</code></pre>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">${YOUR_GIT_STACKS_WEB_APP_PATH}</span>/deploy/terraform/azure
terraform init -backend-config=./backend.local.tfvars
terraform plan
</code></pre>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 7/14/2020 by leobarnesamido</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/stacks/docs/docs/infrastructure/deployment"><span class="arrow-prev">← </span><span>Previous</span></a><a class="docs-next button" href="/stacks/docs/infrastructure/azure/pipeline_templates"><span>Pipeline Templates</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#terraform">Terraform</a><ul class="toc-headings"><li><a href="#recommended-usage">Recommended Usage</a></li></ul></li><li><a href="#bootstrap-the-azure-tenant">Bootstrap the Azure tenant</a><ul class="toc-headings"><li><a href="#security-best-practice-recommendations">Security best practice recommendations</a></li><li><a href="#resolving-lock-state">Resolving lock state</a></li></ul></li><li><a href="#azure-devops-pipelines">Azure Devops Pipelines</a><ul class="toc-headings"><li><a href="#contributing">Contributing</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/stacks/" class="nav-home"></a><div><h5>Docs</h5><a href="/stacks/docs/index">Getting Started</a></div><div><h5>About Us</h5><a href="https://amido.com/">Amido</a></div><div><h5>Open Source</h5><a href="https://github.com/amido/stacks" rel="noreferrer noopener" target="_blank">GitHub</a></div></section><a href="https://github.com/amido/stacks" target="_blank" rel="noreferrer noopener" class="fbOpenSource"></a><section class="copyright">Copyright © 2020 Amido Ltd</section></footer></div></body></html>