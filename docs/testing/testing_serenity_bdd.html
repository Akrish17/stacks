<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Testing - End to End Automation with Serenity BDD Java · Amido Stacks</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Getting started"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Testing - End to End Automation with Serenity BDD Java · Amido Stacks"/><meta property="og:type" content="website"/><meta property="og:url" content="https://amido.github.io/stacks/"/><meta property="og:description" content="## Getting started"/><meta name="twitter:card" content="summary"/><meta name="robots" content="noindex"/><link rel="shortcut icon" href="/stacks/"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script src="/stacks/js/scrollSpy.js"></script><link rel="stylesheet" href="/stacks/css/main.css"/><script src="/stacks/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/stacks/"><h2 class="headerTitle">Amido Stacks</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/stacks/docs/" target="_self">Docs</a></li><li class=""><a href="https://github.com/amido/stacks" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Testing - End to End Automation with Serenity BDD Java</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="getting-started"></a><a href="#getting-started" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting started</h2>
<p>Serenity BDD provides excellent integration with Selenium, which allows you to avoid a lot of the boilerplate and infrastructure code you normally need to deal with in automated web tests.
In particular, Serenity manages the driver lifecycle for you (so you don’t need to create your own driver instances, or close them at the end of the tests).
Serenity can also be configured to automatically take screenshots throughout the tests, creating rich documentation of how each test played out.
When you write your tests in a fluent, readable manner, these screenshots become part of the &quot;living documentation&quot; of your application.</p>
<h3><a class="anchor" aria-hidden="true" id="configurations"></a><a href="#configurations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configurations</h3>
<p>The serenity.conf file need to be configured <a href="https://github.com/amido/stacks-webapp-template/blob/master/packages/scaffolding-cli/templates/test/xxAMIDOxx.xxSTACKSxx.E2E.Serenity/src/test/resources/serenity.conf">Serenity conf</a></p>
<p>The following properties for different environments are required in the src/test/resources/serenity.conf configuration file.</p>
<pre><code class="hljs css language-text">  webdriver.base.url
  api.base.url
  WebDriver Downloads
  - If you wish to use a local instance of Serenity Webdriver, be sure to download the WebDriver file for the browsers with which you wish to perform cross browser testing
  from the links mentioned below:
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="browser-download-location"></a><a href="#browser-download-location" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Browser Download Location</h3>
<pre><code class="hljs css language-text">1) [Opera](https://github.com/operasoftware/operachromiumdriver/releases)
2) [Firefox](https://github.com/mozilla/geckodriver/releases)
3) [Chrome](http://chromedriver.chromium.org/downloads)
4) [Internet Explorer](https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver)
5) [Microsoft Edge](https://blogs.windows.com/msedgedev/2015/07/23/bringing-automated-testing-to-microsoft-edge-through-webdriver/)
   Configure the serenity.properties file:
   serenity.take.screenshots - Set this property to have more finer control on how screenshots are taken, default is serenity.take.screenshots=BEFORE_AND_AFTER_EACH_STEP This property can take the following values:
</code></pre>
<p>FOR_EACH_ACTION: Saves a screenshot at every web element action (like click(), typeAndEnter(), type(), typeAndTab() etc.).
BEFORE_AND_AFTER_EACH_STEP: Saves a screenshot before and after every step.
AFTER_EACH_STEP: Saves a screenshot after every step
FOR_FAILURES: Saves screenshots only for failing steps.
DISABLED: Does not save screenshots for any steps.
webdriver.driver - What browser do you want your tests to run in, for example firefox, chrome, phantomjs or iexplorer.</p>
<p>webdriver.chrome.driver - Path to the Chrome driver, if it is not on the system path.</p>
<p>More properties here: <a href="https://serenity-bdd.github.io/theserenitybook/latest/serenity-system-properties.html">https://serenity-bdd.github.io/theserenitybook/latest/serenity-system-properties.html</a></p>
<h3><a class="anchor" aria-hidden="true" id="run-tests-locally"></a><a href="#run-tests-locally" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Run Tests Locally</h3>
<p>Open current folder in the terminal</p>
<pre><code class="hljs css language-bash">Execute tests by running one of the following commands:
a. Run all tests on the default environment: mvn clean verify
b. Run all tests on the specific environment e.g. staging: mmvn clean verify -Denvironment=staging
b. Run Smoke tests only: mvn clean verify -Dcucumber.options=<span class="hljs-string">"--tags @Smoke"</span>
c. Run Functional tests only: mvn clean verify -Dcucumber.options=<span class="hljs-string">"--tags @Functional"</span>
d. Run tests by other tags and ignore tests that contain @Ignore tags: mvn clean verify verify -Dcucumber.options=<span class="hljs-string">"--tags ~@Ignore --tags @YourTag"</span>
</code></pre>
<p>Check the output report
As a result of the test execution - serenity-maven-plugin will automatically generate the test report with name - index.html.</p>
<pre><code class="hljs css language-text">Test Report Location is: ..target/site/serenity/index.html
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="manual-aggregation-of-the-test-report"></a><a href="#manual-aggregation-of-the-test-report" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Manual Aggregation of the Test Report</h4>
<pre><code class="hljs css language-bash">- Open the ../E2E/Serenity path <span class="hljs-keyword">in</span> the terminal
- Execute the mvn serenity:aggregate <span class="hljs-built_in">command</span>
- Running tests <span class="hljs-keyword">in</span> parallel threads - Using forks
  Note : Choosing the right forking strategy and parallel execution settings can have a substantial impact on the memory requirements
  and the execution time of the build system. Using multiple forks can be a good alternative to running all tests <span class="hljs-keyword">in</span> a single JVM, and can reduce the risk of certain types of errors.
</code></pre>
<p>Using Forked Test Execution, new JVM processes are spun up to execute the tests, up to a configurable maximum number of processes.
This creates better separation between tests, which can improve their reliability.</p>
<p>Maven is set to spawn new processes by the forkCount configuration element, as shown here below.
This can either be a number (the maximum number of forks) or a multiplier (the number of forks per CPU). The current configuration uses the value of &quot;2&quot;, which means 2 forked processes per CPU:</p>
<pre><code class="hljs css language-xml"> <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-failsafe-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.22.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">parallel</span>&gt;</span>classes<span class="hljs-tag">&lt;/<span class="hljs-name">parallel</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">threadCount</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">threadCount</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">forkCount</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">forkCount</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</code></pre>
<p><strong>Note</strong>
The more threads are used, the higher the chances of sporadic, hard-to-reproduce test failures due to timeouts and other related issues. The added performance gain of each thread also tends to drop off for higher numbers of threads.pper-left box, drag-and-drop a file, or open one with the chooser at the top.
Content gets parsed and displayed in the upper-right box; rule violations (if any) show up in the lower-right box.
Click a violation for information about it or click its line number to highlighted it in the lower-left box.</p>
<blockquote>
<p><em>Note</em>: <a href="https://github.com/DavidAnson/markdownlint/blob/master/doc/Rules.md">All rules</a> are enabled except <a href="https://github.com/DavidAnson/markdownlint/blob/master/doc/Rules.md#md013">MD013/line-length</a> and <a href="https://github.com/DavidAnson/markdownlint/blob/master/doc/Rules.md#md002">MD002/first-heading-h1</a> (deprecated).</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="resources"></a><a href="#resources" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resources</h4>
<ul>
<li><a href="https://github.com/DavidAnson/markdownlint"><code>markdownlint</code> on GitHub</a></li>
<li><a href="https://www.npmjs.com/package/markdownlint"><code>markdownlint</code> on npm</a></li>
<li><a href="https://daringfireball.net/projects/markdown/">Markdown specification</a></li>
<li><a href="https://commonmark.org/">CommonMark specification</a></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="thanks"></a><a href="#thanks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Thanks</h4>
<p><a href="https://github.com/markdownlint/markdownlint"><code>markdownlint/Ruby</code></a> for the inspiration and <a href="https://github.com/markdown-it/markdown-it"><code>markdown-it</code></a> for the parser and interactive demo idea!</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 8/27/2020 by Suresh Krishnan</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#getting-started">Getting started</a><ul class="toc-headings"><li><a href="#configurations">Configurations</a></li><li><a href="#browser-download-location">Browser Download Location</a></li><li><a href="#run-tests-locally">Run Tests Locally</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/stacks/" class="nav-home"></a><div><h5>Docs</h5><a href="/stacks/docs/index">Getting Started</a></div><div><h5>About Us</h5><a href="https://amido.com/">Amido</a></div><div><h5>Open Source</h5><a href="https://github.com/amido/stacks" rel="noreferrer noopener" target="_blank">GitHub</a></div></section><a href="https://github.com/amido/stacks" target="_blank" rel="noreferrer noopener" class="fbOpenSource"></a><section class="copyright">Copyright © 2020 Amido Ltd</section></footer></div></body></html>