<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Using the scaffolding-cli to build an application · Amido Stacks</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="[![npm](https://img.shields.io/npm/dt/@amidostacks/scaffolding-cli)](https://www.npmjs.com/package/@amidostacks/scaffolding-cli)"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Using the scaffolding-cli to build an application · Amido Stacks"/><meta property="og:type" content="website"/><meta property="og:url" content="https://amido.github.io/stacks/"/><meta property="og:description" content="[![npm](https://img.shields.io/npm/dt/@amidostacks/scaffolding-cli)](https://www.npmjs.com/package/@amidostacks/scaffolding-cli)"/><meta property="og:image" content="https://amido.github.io/stacks/img/logo.png"/><meta name="twitter:card" content="summary"/><meta name="robots" content="noindex"/><link rel="shortcut icon" href="/stacks/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script src="/stacks/js/scrollSpy.js"></script><link rel="stylesheet" href="/stacks/css/main.css"/><script src="/stacks/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/stacks/"><img class="logo" src="/stacks/img/thumbnail_stacks.png" alt="Amido Stacks"/><h2 class="headerTitleWithLogo">Amido Stacks</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/stacks/docs/" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/stacks/docs/monorepo" target="_self">About Stacks</a></li><li class=""><a href="https://github.com/amido/stacks" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Getting Started</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/stacks/docs/">About Amido Stacks</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/stacks/docs/getting_started_demo">Using the scaffolding-cli to build an application</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/getting_started_dev">Dev - Using the repo to build an application</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/monorepo">Stacks Monorepo</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">scaffolding-cli<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/stacks/docs/scaffolding_cli">scaffolding-cli</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/stacks/docs/deployment">Deployment</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/publishing">Publishing Packages</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/publishing_nuget">Publishing NuGet Packages</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/pipeline_templates">Pipeline Templates</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/infrastructure_code">Infrastructure</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Testing<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/stacks/docs/testing">Testing and Quality</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/cli_testing_frameworks">Project Types - Testing</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/testing_static">Static Code Analysis</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/testing_selenium">E2E Selenium .NET</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Packages<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/stacks/docs/packages">Packages</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/cli_process">CLI</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Supporting Docs<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/stacks/docs/browser_support">Browser Support</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/server_side_cache">Server Side Cache</a></li><li class="navListItem"><a class="navItem" href="/stacks/docs/faq">FAQ</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Using the scaffolding-cli to build an application</h1></header><article><div><span><p><a href="https://www.npmjs.com/package/@amidostacks/scaffolding-cli"><img src="https://img.shields.io/npm/dt/@amidostacks/scaffolding-cli" alt="npm"></a></p>
<p>Please refer to the <a href="https://github.com/amido/stacks-webapp-template/tree/master/packages/scaffolding-cli">scaffolding-cli</a> package for more information.</p>
<h2><a class="anchor" aria-hidden="true" id="scaffolding-cli"></a><a href="#scaffolding-cli" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scaffolding-cli</h2>
<p>Templates out a fully functional and deployable project in a variety of flavours.
Including tests (unit, integration), and infrastructure and deployment definitions.
All from your CLI.</p>
<h2><a class="anchor" aria-hidden="true" id="getting-started"></a><a href="#getting-started" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting Started</h2>
<p>We are using npx to execute and create the
<a href="https://www.npmjs.com/package/@amidostacks/scaffolding-cli">template-cli</a>
<a href="https://www.npmjs.com/package/npx">npx</a>.</p>
<p>We are supporting and running <a href="https://nodejs.org/en/about/releases/">node@12</a>.
Please ensure that your local environment has the correct version
<a href="https://nodejs.org/en/download/">installed</a>.</p>
<p>Additional tools you may want/need to test the outputs locally - this is not required as you could run directly in pipeline - are as follows:</p>
<ul>
<li>docker
<ul>
<li>the only real dependencies for local testing as all pipelines are using a shared library of public CI images</li>
<li>docs on the CI containers used can be found <a href="https://github.com/amido/stacks-webapp-template/tree/master/libs/images">here</a> links to their public dockerhub pages below:
<ul>
<li><a href="https://hub.docker.com/repository/docker/amidostacks/ci-sonarscanner">sonar-scanner</a></li>
<li><a href="https://hub.docker.com/repository/docker/amidostacks/ci-tf">terraform-deploy</a></li>
<li><a href="https://hub.docker.com/repository/docker/amidostacks/ci-k8s">k8s-deploy</a></li>
</ul></li>
</ul></li>
<li>dotnet/nodejs/chrome-webdriver/testcafe/sonar-scanner</li>
<li>optionally (prefer to use the <code>docker run -v ...</code>):
<ul>
<li>terraform - v0.12.24</li>
<li>kubectl -</li>
</ul></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="prerequisites"></a><a href="#prerequisites" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisites</h2>
<p>Below are the pre-requisites to get off the ground</p>
<h3><a class="anchor" aria-hidden="true" id="public-cloud"></a><a href="#public-cloud" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Public Cloud</h3>
<p>You will need a public cloud account with one of the following providers.</p>
<p>you can find more information around the infrastructure bootstrapping and requirements <a href="/stacks/docs/infrastructure_code">here</a>.</p>
<h4><a class="anchor" aria-hidden="true" id="azure"></a><a href="#azure" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Azure</h4>
<p>You will need to create, or ask your admin for Azure to create for you, an <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal">SPN account</a> within a new or existing subscription, that will have the owner privileges. Optionally, you can create 2 to follow security best practice <a href="/stacks/docs/infrastructure_code####Azure">here</a>.</p>
<p>This SPN (Service Principal Name) will be used throughout to create and manage resources within the cloud via terraform. You can find additional info on how to use these locally along with recommnded usage.</p>
<h4><a class="anchor" aria-hidden="true" id="gcp"></a><a href="#gcp" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GCP</h4>
<p>You will need to create a project - preferably 2 one for Terraform state and one for the solution - which you may choose to create 2 of if you want your production cluster to be completely separate.</p>
<p>You will need to create a service account (or 2 if your state is in a different account) - you will need to take note of the JSON credentials file and store in an environment variable for use in pipelines.</p>
<p><code>GOOGLE_CREDENTIALS</code> will be a json key with a service account credentials.</p>
<!-- #### AWS 
Coming soon -->
<h3><a class="anchor" aria-hidden="true" id="cicd--tooling"></a><a href="#cicd--tooling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CI/CD  Tooling</h3>
<p>You will need access to CI/CD tooling with YAML based input.</p>
<h4><a class="anchor" aria-hidden="true" id="azuredevops"></a><a href="#azuredevops" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AzureDevOps</h4>
<p>You will require AzureDevops library - Microsoft speak for environment variables that are scoped to your jobs/stages within the pipeline as a bare minimum, instructions on how to create it can be found <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/library/?view=azure-devops">here</a></p>
<p>You will use the credentials from your SPN (Service Principal Name) created above to place the values here:</p>
<p><img src="https://amidostacksassets.blob.core.windows.net/docs/assets/image%20(4).png" alt="infra_vars" title="Infra variables"></p>
<p>In this instance it is important that they are named as per above:</p>
<ul>
<li>azure_client_id</li>
<li>azure_client_secret</li>
<li>azure_subscription_id</li>
<li>azure_tenant_id</li>
</ul>
<p>As these are used downstream in all interactions with the Azure API to create any kind of infrastructure using Terraform within both shared-services and application layer.</p>
<p>You can name it whatever you choose, and ensure that your yaml definitions corresponds to it for all pipelines dealing with infrastructure - e.g. infra-pipeline and app/api-pipelines in the <code>Infra$Stage</code> jobs.</p>
<p>Similarly you can/should create a set of variables for application level variables that will be used at pipeline runtime to configure your application. By default you will have all tests and anything requiring external tooling disabled.</p>
<p><img src="https://amidostacksassets.blob.core.windows.net/docs/assets/image%20(5).png" alt="app_vars" title="App Vars"></p>
<p>Please ensure these are scoped correctly you can find it in the YAML under
<code>- group: REPLACE_ME_FOR_LIBRARY_NAME</code></p>
<p>where <code>REPLACE_ME_FOR_LIBRARY_NAME</code> in this example would correspond to <code>amido-stacks-demo-infra</code> || <code>amido-stacks-demo-app</code></p>
<h4><a class="anchor" aria-hidden="true" id="jenkins"></a><a href="#jenkins" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Jenkins</h4>
<h5><a class="anchor" aria-hidden="true" id="credentials"></a><a href="#credentials" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Credentials</h5>
<p>You will need to create Credentials objects in Jenkins that the pipeline will use to bootstrap various resources in either GCP or Azure.</p>
<p>For GCP credentials you will want to create a file secret with your service account json key.
NB: if you name something other than <code>GCP_KEY</code> please update the pipeline definitions as well (simply search and replace)</p>
<p>Similarly as with AzureDevops all the global vars are declared at the global scope and picked up in various stages with a few exceptions which will need to be set at a stage level, e.g. <code>cluster_name</code> | <code>dns_pointer_record</code> | <code>stage</code> | <code>environment</code></p>
<p>Similarly as with AzureDevops all jobs are running in publicly available CI containers and include all the dependencies for various tooling used.</p>
<!--
#### Gitlab
Coming soon -->
<h3><a class="anchor" aria-hidden="true" id="variables-and-secrets"></a><a href="#variables-and-secrets" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Variables and Secrets</h3>
<h4><a class="anchor" aria-hidden="true" id="todo"></a><a href="#todo" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TODO</h4>
<!-- TODO -->
<h2><a class="anchor" aria-hidden="true" id="what-you-get"></a><a href="#what-you-get" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What you get</h2>
<p>At a high level each of the options within the CLI will roughly provide the same outcome, with tailored code for specific cloud platform and deployement tool combination.</p>
<p>CSR being the only exception where the infrastructure doesn't cover K8s infrastructure as it is not required.</p>
<h3><a class="anchor" aria-hidden="true" id="ootb-template"></a><a href="#ootb-template" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>OOTB template</h3>
<p>Includes a full SDLC for a chosen template app (API/UI/tests) on a specified deployment (CI/CD) platform with the below conceptiual stages. However as the output is entirely modular it allows for easy extension by user in deploy steps of either k8s or terraform - user should be able to enrich the generated output with their specific needs.</p>
<p>Application Layer:</p>
<ul>
<li>CI
<ul>
<li>Unit test</li>
<li>Tests...</li>
<li>Build (Transpile/compile)</li>
<li>Generate Docker Image (except for CSR)</li>
<li>Publish Image (Largely relying on Cloud Registries Scanning capabilities)
<ul>
<li>If you are publishing to registries other than ACR/ECR/GCR</li>
<li>Enable vulnerability scans in the YAML</li>
</ul></li>
</ul></li>
<li>Stage (Dev/test/prod)
<ul>
<li>Infra
<ul>
<li>Terraform lib
<ul>
<li>DNS record</li>
<li>separate ResourceGroup (optional)</li>
<li>CosmosDB (optional)</li>
<li>RedisCache (optional)</li>
<li>metric alarms (optional)</li>
</ul></li>
<li>Coming soon... Kubernetes operators</li>
</ul></li>
<li>Deploy
<ul>
<li>kubectl apply || Blob update with React app</li>
</ul></li>
<li>Smoke test
<ul>
<li>Lighthouse/selenium/testcafe</li>
</ul></li>
</ul></li>
</ul>
<p>Infrastructure Layer (Shared Services):</p>
<ul>
<li>Stage (nonprod/prod - this is subjective to user preference, can be dev/test/prod)
<ul>
<li>infra:
<ul>
<li>K8s (AKS/GKE/EKS)</li>
<li>Network + subnets</li>
<li>BLOB like storage (blob/S3)</li>
<li>Vault solution</li>
<li>SSL termination (AppGateway)</li>
<li>DNS zone</li>
</ul></li>
<li>k8s configuration:
<ul>
<li>ingress controller - with automatic IP binding and AppGateway intgeration</li>
<li>pod level identity management (addpodidentity/fargate-profile)</li>
<li>gatekeeper</li>
</ul></li>
</ul></li>
</ul>
<p>tests (in standalone mode):</p>
<ul>
<li>lots more info can be found in the testing section <a href="/stacks/docs/testing##Overview">overview</a></li>
</ul>
<!-- ### Infrastructure template
<ul>
<li><p>Sharedservices layer:</p></li>
<li><p>Application layer: --&gt;</p></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="business-source-code"></a><a href="#business-source-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Business Source code</h3>
<h4><a class="anchor" aria-hidden="true" id="azure-1"></a><a href="#azure-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Azure</h4>
<p>An UI app in react (SSR/CSR flavour):</p>
<ul>
<li>SSR
<ul>
<li>express mware for authentication using passport</li>
<li>routing set up within nextjs from client to server proxying out to defined endpoints (sample using the yumido sample )</li>
<li>...</li>
</ul></li>
<li>CSR:
<ul>
<li>PKCE integration</li>
<li>API integration</li>
<li>...</li>
</ul></li>
</ul>
<p>An API in Java (springboot) and .netcore flavours with:</p>
<ul>
<li>CosmosDB integration (deploy/infra/yaml)</li>
<li>swagger generation</li>
</ul>
<p>Coming soon crednetialless auth within azure using podidentity</p>
<h2><a class="anchor" aria-hidden="true" id="examples"></a><a href="#examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h2>
<p>Below are some examples of how to use the CLI for specific outcomes. Please read the <a href="###Advanced\ \Usage">advanced usage</a> section on how to apply the output in more complex scenarios.</p>
<h3><a class="anchor" aria-hidden="true" id="basic"></a><a href="#basic" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Basic</h3>
<p>A generated outcome is a fully functioning folder that can be used as an entire repo on a SCM provider of your choice.</p>
<h4><a class="anchor" aria-hidden="true" id="create-a-ssr-webapp-from-template"></a><a href="#create-a-ssr-webapp-from-template" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create a SSR webapp from template</h4>
<p>Creates an amidostacks template in your local directory much like
express-generate with an addition of <code>build/, deploy/, docs/, src/</code> folders as
per the Amido Stacks standards.</p>
<pre><code class="hljs css language-bash">npx @amidostacks/scaffolding-cli@latest run -i
</code></pre>
<ol>
<li><p>Follow the CLI prompts to create a templated app with user defined
configuration: ssr this is why t - Project Name: <em>default</em>: current directory
(will create a directory with this name)</p>
<ul>
<li>Project Type: <em>default</em>: SSR (server side rendering)</li>
<li>Platform: <em>default</em>: AKS (Azure Kubernetes Service)</li>
<li>CI/CD Tooling: <em>default</em>: AzureDevOps</li>
</ul></li>
<li><p>Navigate to the created project directory to install template dependencies:
e.g. ${SELECTED_DIR}/$PROJECT_NAME</p></li>
</ol>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">${SELECTED_DIR}</span>/<span class="hljs-variable">$PROJECT_NAME</span>/src/
npm install
</code></pre>
<ol start="6">
<li>Build and run the app:</li>
</ol>
<pre><code class="hljs css language-bash">npm run build
npm run start
</code></pre>
<p>Open Browser and hit <a href="http://localhost:3000">http://localhost:3000</a></p>
<!-- MORE examples here Test only? Infra Only? -->
<h3><a class="anchor" aria-hidden="true" id="advanced-usage"></a><a href="#advanced-usage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Advanced Usage</h3>
<p>Whilst the basic examples are fine for small projects and get you off the ground quickly to have a deployed application securly behind a domain of your choice.</p>
<h4><a class="anchor" aria-hidden="true" id="using-monorepo"></a><a href="#using-monorepo" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using Monorepo</h4>
<p>When you work within a monorepo, you will have to do a few minor adjustments to the generated output.</p>
<p>Simply <code>cd</code> into the root directory of your monorepo and run  the cli as many times as you want to create the desired service components, e.g. a UI (using either CSR/SSR), some APIs and you may want a separate infrastructure and blackbox test directories - to end up with below sample.</p>
<p>You will want to merge the .gitignore files from each component and place in the root - or if you have an existing one make sure it covers all your application types.</p>
<p>Since you will probably want to have a shared services type infrastructure controlled from a central place you can ignore or remove  <code>deploy/$cloud/infra</code> folders (ensure the yaml files are also not used within your pipeline tool). IT IS IMPORTANT HOWEVER TO understand within your project what infrastructure should live with the application - <a href="https://github.com/amido/stacks-webapp-template/tree/master/libs/orchestration">Amido Infra libs</a> has a variety of OSS libraries you can use within your components e.g. CosmosDB, Blob, Qeueu, Topic managers for all 3 major clouds. You can also choose to use cloud's own provided templates, always better to opt for a library with a predefined interface  rather than building your definitions for application layer infra. it can be re-used by other components without copy/pasta.</p>
<p>When a project gets big you will want to have an E2E type tests to ensure regressions aren't introduced and UX is preserved. whilst all components have their own tests that cover units/regressions/etc... a black box test is often (if not always) required in projects of distributed nature.</p>
<!-- TODO: this diagram needs cleaning up -->
<pre><code class="hljs css language-bash">├── menu-api
│   ├── aux_scripts
│   ├── build
│   │   └── azDevops
│   │       └── azure
│   ├── deploy
│   │   ├── azure
│   │   │   ├── app
│   │   │   └── infra
│   │   └── k8s
│   │       └── app
│   ├── docs
│   ├── src
│   │   ├── api
│   │   │   ├── Company.Project.API
│   │   │   ├── Company.Project.API.ComponentTests
│   │   │   ├── Company.Project.API.ContractTests
│   │   │   ├── Company.Project.API.Models
│   │   │   ├── Company.Project.Application.CommandHandlers
│   │   │   ├── Company.Project.Application.Integration
│   │   │   ├── Company.Project.Application.QueryHandlers
│   │   │   ├── Company.Project.CQRS
│   │   │   ├── Company.Project.CQRS.UnitTests
│   │   │   ├── Company.Project.Common
│   │   │   ├── Company.Project.Common.UnitTests
│   │   │   ├── Company.Project.Domain
│   │   │   ├── Company.Project.Domain.UnitTests
│   │   │   ├── Company.Project.Infrastructure
│   │   │   └── Company.Project.Infrastructure.IntegrationTests
│   │   ├── tests
│   │   │   ├── Functional
│   │   │   └── Performance
│   │   └── ui
│   └── <span class="hljs-built_in">test</span>
│       ├── Company.Project.E2E.Selenium
│       │   ├── Api
│       │   ├── Configuration
│       │   ├── Selenium
│       │   └── Tests
│       └── testcafe
│           ├── api
│           ├── fixtures
│           └── utils
└── node-ssr
    ├── aux_scripts
    ├── build
    │   └── azDevops
    │       └── azure
    ├── deploy
    │   ├── azure
    │   │   ├── app
    │   │   └── infra
    │   └── k8s
    │       └── app
    ├── docs
    ├── src
    │   ├── __mocks__
    │   │   └── next
    │   ├── __tests__
    │   │   ├── axe
    │   │   ├── cypress
    │   │   ├── fixtures
    │   │   └── pact
    │   ├── components
    │   │   ├── ApiPane
    │   │   ├── CreateForm
    │   │   ├── Header
    │   │   ├── Layout
    │   │   ├── Link
    │   │   ├── Notifier
    │   │   ├── RestaurantList
    │   │   ├── RestaurantListItem
    │   │   └── Search
    │   ├── compositions
    │   │   ├── create
    │   │   └── home
    │   ├── config
    │   ├── constants
    │   │   └── apis
    │   ├── ducks
    │   │   ├── add-menu
    │   │   └── get-menus
    │   ├── environment-configuration
    │   ├── interfaces
    │   ├── pages
    │   ├── public
    │   │   └── static
    │   ├── server
    │   │   ├── api
    │   │   ├── core
    │   │   └── middlewares
    │   ├── services
    │   │   └── menus
    │   ├── state-management
    │   └── utils
    └── <span class="hljs-built_in">test</span>
        ├── testcafe
        │   ├── api
        │   ├── fixtures
        │   └── utils
        └── xxAMIDOxx.xxSTACKSxx.E2E.Selenium
            ├── Api
            ├── Configuration
            ├── Selenium
            └── Tests
&lt;!-- test_selenium --&gt;
&lt;!-- infra only --&gt;
── node-ssr.bootstrap-config.json
── menu-api.bootstrap-config.json
</code></pre>
<h5><a class="anchor" aria-hidden="true" id="config-file"></a><a href="#config-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Config file</h5>
<p>Each run of the CLI will generate a complete configuration object with values you have specified and a placehold for those you skipped (or weren't exposed by the CLI). You can re-run the cli pointing to the same folder as many times as you want with different variables. Equally, you can run it in different directory to create the same configuration templates with different project name, repo urls/names etc...</p>
<h5><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">cd</span> mono_repo_root; \
npx @amidostacks/scaffolding-cli@latest run -c menu-api.bootstrap-config.json
</code></pre>
<p>Where the generated config would look like this:</p>
<pre><code class="hljs css language-JSON">{
  <span class="hljs-attr">"projectName"</span>: <span class="hljs-string">"menu-api"</span>,
  <span class="hljs-attr">"projectType"</span>: <span class="hljs-string">"ssr"</span>,
  <span class="hljs-attr">"platform"</span>: <span class="hljs-string">"aks"</span>,
  <span class="hljs-attr">"deployment"</span>: <span class="hljs-string">"azdevops"</span>,
  <span class="hljs-attr">"advancedConfig"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"createConfig"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"cloudRegion"</span>: <span class="hljs-string">"uksouth"</span>,
  <span class="hljs-attr">"cloudResourceGroup"</span>: <span class="hljs-string">"string"</span>,
  <span class="hljs-attr">"businessCompany"</span>: <span class="hljs-string">"company"</span>,
  <span class="hljs-attr">"businessProject"</span>: <span class="hljs-string">"project"</span>,
  <span class="hljs-attr">"businessDomain"</span>: <span class="hljs-string">"api"</span>,
  <span class="hljs-attr">"businessComponent"</span>: <span class="hljs-string">"menu"</span>,
  <span class="hljs-attr">"sourceControlRepoType"</span>: <span class="hljs-string">"github"</span>,
  <span class="hljs-attr">"sourceControlRepoName"</span>: <span class="hljs-string">"Name-Of-Repo"</span>,
  <span class="hljs-attr">"sourceControlRepoUrl"</span>: <span class="hljs-string">"https://github/sample.git"</span>,
  <span class="hljs-attr">"terraformBackendStorage"</span>: <span class="hljs-string">"replace_terraform_backend_storage"</span>,
  <span class="hljs-attr">"terraformBackendDtorageRg"</span>: <span class="hljs-string">"replace_terraform_backend_storage_rg"</span>,
  <span class="hljs-attr">"terraformBackendStorageContainer"</span>: <span class="hljs-string">"replace_terraform_backend_storage_container"</span>
}
</code></pre>
<p>you can then re-run the cli in the same directory by pointing to a copy of the
generated file e.g. <code>billing-api</code>  which could look like this:</p>
<pre><code class="hljs css language-JSON">{
  <span class="hljs-attr">"projectName"</span>: <span class="hljs-string">"billing-api"</span>,
  <span class="hljs-attr">"projectType"</span>: <span class="hljs-string">"infra"</span>,
  <span class="hljs-attr">"platform"</span>: <span class="hljs-string">"aks"</span>,
  <span class="hljs-attr">"deployment"</span>: <span class="hljs-string">"azdevops"</span>,
  <span class="hljs-attr">"advancedConfig"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"createConfig"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"cloudRegion"</span>: <span class="hljs-string">"uksouth"</span>,
  <span class="hljs-attr">"cloudResourceGroup"</span>: <span class="hljs-string">"string"</span>,
  <span class="hljs-attr">"businessCompany"</span>: <span class="hljs-string">"company"</span>,
  <span class="hljs-attr">"businessProject"</span>: <span class="hljs-string">"project"</span>,
  <span class="hljs-attr">"businessDomain"</span>: <span class="hljs-string">"api"</span>,
  <span class="hljs-attr">"businessComponent"</span>: <span class="hljs-string">"menu"</span>,
  <span class="hljs-attr">"sourceControlRepoType"</span>: <span class="hljs-string">"github"</span>,
  <span class="hljs-attr">"sourceControlRepoName"</span>: <span class="hljs-string">"Name-Of-Repo"</span>,
  <span class="hljs-attr">"sourceControlRepoUrl"</span>: <span class="hljs-string">"https://github/sample.git"</span>,
  <span class="hljs-attr">"terraformBackendStorage"</span>: <span class="hljs-string">"replace_terraform_backend_storage"</span>,
  <span class="hljs-attr">"terraformBackendDtorageRg"</span>: <span class="hljs-string">"replace_terraform_backend_storage_rg"</span>,
  <span class="hljs-attr">"terraformBackendStorageContainer"</span>: <span class="hljs-string">"replace_terraform_backend_storage_container"</span>
}
</code></pre>
<p>NB:</p>
<ul>
<li>path to config can an absolute path that is accessible to the CLI (any network or local drive path) e.g. <code>npx @amidostacks/scaffolding-cli@latest run -c /var/api/conf/definitions/menu-api.bootstrap-config.json</code></li>
<li>path to a config can also be a relative, from the location of where the CLI is run from e.g. <code>npx @amidostacks/scaffolding-cli@latest run -c ../conf/definitions/menu-api.bootstrap-config.json</code></li>
</ul>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 6/19/2020 by estherthetesteramido</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/stacks/docs/index"><span class="arrow-prev">← </span><span>About Amido Stacks</span></a><a class="docs-next button" href="/stacks/docs/getting_started_dev"><span>Dev - Using the repo to build an application</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#scaffolding-cli">Scaffolding-cli</a></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#prerequisites">Prerequisites</a><ul class="toc-headings"><li><a href="#public-cloud">Public Cloud</a></li><li><a href="#cicd--tooling">CI/CD  Tooling</a></li><li><a href="#variables-and-secrets">Variables and Secrets</a></li></ul></li><li><a href="#what-you-get">What you get</a><ul class="toc-headings"><li><a href="#ootb-template">OOTB template</a></li><li><a href="#business-source-code">Business Source code</a></li></ul></li><li><a href="#examples">Examples</a><ul class="toc-headings"><li><a href="#basic">Basic</a></li><li><a href="#advanced-usage">Advanced Usage</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/stacks/" class="nav-home"><img src="/stacks/img/thumbnail_stacks.png" alt="Amido Stacks" width="66" height="58"/></a><div><h5>Docs</h5><a href="/stacks/docs/en/index">Getting Started</a></div><div><h5>Community</h5><a href="https://amido.com/">Amido</a></div><div><h5>More</h5><a href="https://github.com/">GitHub</a></div></section><a href="https://github.com/amido/stacks" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/stacks/img/logo.png" alt="stacks" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Amido Ltd</section></footer></div></body></html>