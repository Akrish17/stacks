<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">Using the repo to build the Java application locally | Amido Stacks</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Using the repo to build the Java application locally | Amido Stacks"><meta data-react-helmet="true" name="description" content="GETTING STARTED WITH THE JAVA SPRINGBOOT APPLICATION"><meta data-react-helmet="true" property="og:description" content="GETTING STARTED WITH THE JAVA SPRINGBOOT APPLICATION"><meta data-react-helmet="true" property="og:url" content="https://amido.github.io/stacks/docs/getting_started_dev_java"><link data-react-helmet="true" rel="shortcut icon" href="/stacks/img/thumbnail_stacks.png"><link data-react-helmet="true" rel="canonical" href="https://amido.github.io/stacks/docs/getting_started_dev_java"><link rel="stylesheet" href="/stacks/styles.a087bf75.css">
<link rel="preload" href="/stacks/styles.0673dcca.js" as="script">
<link rel="preload" href="/stacks/runtime~main.a0bc6fc3.js" as="script">
<link rel="preload" href="/stacks/main.7a238d84.js" as="script">
<link rel="preload" href="/stacks/1.328d9d07.js" as="script">
<link rel="preload" href="/stacks/2.12addba4.js" as="script">
<link rel="preload" href="/stacks/3.4373d897.js" as="script">
<link rel="preload" href="/stacks/1be78505.16c4e985.js" as="script">
<link rel="preload" href="/stacks/62.df314b90.js" as="script">
<link rel="preload" href="/stacks/935f2afb.bd1b0fdf.js" as="script">
<link rel="preload" href="/stacks/17896441.605a96b7.js" as="script">
<link rel="preload" href="/stacks/663c3c70.5c608b80.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/stacks/"><img class="navbar__logo" src="/stacks/img/logo.svg" alt="Amido Stacks Logo"><strong class="navbar__title">Amido Stacks</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/stacks/docs/">Docs</a><a href="https://github.com/amido/stacks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/stacks/"><img class="navbar__logo" src="/stacks/img/logo.svg" alt="Amido Stacks Logo"><strong class="navbar__title">Amido Stacks</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/stacks/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/amido/stacks" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stacks/docs/">About Amido Stacks</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Build the application</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stacks/docs/getting_started_demo">Using the scaffolding-cli to build an application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stacks/docs/getting_started_dev">Dev [Node.js]- Using the repo to build the Node.js application</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/stacks/docs/getting_started_dev_java">Dev [Java] - Using the repo to build the Java application locally</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/stacks/docs/getting_started_dev_dotnet">Dev [Dotnet] - Using the repo to build the Dotnet application locally</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Workloads</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/workloads">Workloads</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Frontend Web Applications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/intro_node_js">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/ide_node_js">IDE Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/environment_variables_nodejs">Enviroment Variables</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/cli_webapp_frameworks">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/monorepo">Stacks Monorepo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/browser_support">Browser Support</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/frontend/server_side_cache">Server Side Cache</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Java Spring Boot REST API Application</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/intro_java">Introduction to the Java REST API application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/quickstart_java">Getting started with the Java Rest API application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/scaffolding_java">Using the Scaffolding CLI to create the Java Rest API project template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/ide_java">IDE guidelines for the Java Rest API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/structure_java">Java Rest API Structure and Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/testing_java">Testing the Java Rest API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/workloads/java/end_to_end_testing_java">End to end automation testing</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Infrastructure</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Azure</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/infrastructure/azure/infrastructure_code">Infrastructure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/infrastructure/azure/pipeline_templates">Pipeline Templates</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Testing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/testing/testing">Testing and quality</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/testing/cli_testing_frameworks">Project Types - Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/testing/testing_serenity_bdd">E2E Serenity BDD Java</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/testing/testing_static">Static Code Analysis</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Packages</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/packages">Packages</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">npm</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/npm/publishing">Publishing Packages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/npm/scaffolding-cli/cli_process">CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/npm/scaffolding-cli/scaffolding_cli">scaffolding-cli</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">nuget</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/nuget/publishing_nuget">Publishing NuGet Packages</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">maven</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/packages/maven/dependency_management">Dependencies and Version Management</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Support</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/stacks/docs/support/faq">FAQ</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Using the repo to build the Java application locally</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="getting-started-with-the-java-springboot-application"></a>GETTING STARTED WITH THE JAVA SPRINGBOOT APPLICATION<a aria-hidden="true" tabindex="-1" class="hash-link" href="#getting-started-with-the-java-springboot-application" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="overview"></a>OVERVIEW<a aria-hidden="true" tabindex="-1" class="hash-link" href="#overview" title="Direct link to heading">#</a></h3><p>This is a sample Java application showcasing best coding practices and integrating with Azure
and scaffolding for Amido Stacks. This application implements Application Insights for performance management,
and Cosmos DB is used for cloud persistence.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="versioning"></a>VERSIONING<a aria-hidden="true" tabindex="-1" class="hash-link" href="#versioning" title="Direct link to heading">#</a></h3><p>This is version <code>1.0.0</code> of the <code>java-stacks</code> project.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="running-the-application-locally"></a>RUNNING THE APPLICATION LOCALLY<a aria-hidden="true" tabindex="-1" class="hash-link" href="#running-the-application-locally" title="Direct link to heading">#</a></h3><ol><li><p>Clone the Java project to your local machine from here: <a href="https://github.com/amido/stacks-java" target="_blank" rel="noopener noreferrer">stacks-java repository</a></p></li><li><p>Configure required environment variables</p><p>The application is currently configured to work with the Azure environment.</p><p>It uses an Azure <strong>CosmosDB</strong> database to store the example application data. So you should have access to an instance to use with the application.
Note: For running on a local Windows environment you can use the <a href="https://docs.microsoft.com/en-us/azure/cosmos-db/local-emulator?tabs=ssl-netstd21" target="_blank" rel="noopener noreferrer">Cosmos DB emulator</a> (CosmosDB Emulator has a known fixed key).</p><p>In addition, Azure <strong>ApplicationInsights</strong> is used for logging purposes. If this is unavailable, modify the application so that it doesn&#x27;t fail to startup if it can&#x27;t access ApplicationInsights, and simply log to the terminal instead.</p><p>There are two corresponding environment variables that need to be set to interact with these systems:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">AZURE_COSMOSDB_KEY</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AZURE_APPLICATION_INSIGHTS_INSTRUMENTATION_KEY</span></div></div></div></div></div><p>For Unix systems, set them as additional variables within e.g. <code>~/.profile</code> or <code>/etc/profile</code>.</p><p>For Windows, open System Properties then select the Advanced tab, then click on the Environment Variables button and add the new parameters.</p></li><li><p>Build and run the application</p><p>Note that at a minimum Java 11 should be installed.</p><p> Move to the <code>&lt;PROJECT-NAME&gt;/java</code> folder, then</p><p> Unix:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw spring-boot:run</span></div></div></div></div></div><p> Windows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mvnw.cmd spring-boot:run</span></div></div></div></div></div></li><li><p>Verify that the application has started</p><p>Browse to <a href="http://localhost:9000/v1/menu" target="_blank" rel="noopener noreferrer">http://localhost:9000/v1/menu</a>. This should return a valid JSON response.</p><p>The application configuration uses Swagger/OAS3 to represent the API endpoints. The Swagger UI can be viewed by directing your
browser to <a href="http://localhost:9000/swagger/index.html" target="_blank" rel="noopener noreferrer">http://localhost:9000/swagger/index.html</a>.</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="authorization"></a>AUTHORIZATION<a aria-hidden="true" tabindex="-1" class="hash-link" href="#authorization" title="Direct link to heading">#</a></h3><p>All API endpoints are (optionally) protected using <strong>Auth0</strong>. There is an <code>auth.properties</code> file within the project codebase.
If the following property within this file is set:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">auth.isEnabled=true</span></div></div></div></div></div><p>then clients will need to pass an <code>Authorization</code> header containing the Bearer token generated from Auth0 as part of the endpoint request. If the value
is set to <code>false</code> then no authorization is required.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="auth0-configuration-properties"></a>AUTH0 CONFIGURATION PROPERTIES<a aria-hidden="true" tabindex="-1" class="hash-link" href="#auth0-configuration-properties" title="Direct link to heading">#</a></h4><p>If using Auth0 for authorization, Auth0 itself will need to be configured with both an API definition and an associated Application.
There are corresponding configuration values required for the Stacks application, within the <code>auth.properties</code> file, e.g.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">auth0.issuer=https://amidostacks.eu.auth0.com/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">auth0.apiAudience=https://amidostacks.eu.auth0.com/api/v2/</span></div></div></div></div></div><p>These parameters are used to verify that the JWT supplied in the Authorization header of a request is valid.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ide-guidelines"></a>IDE GUIDELINES<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ide-guidelines" title="Direct link to heading">#</a></h3><p>We recommend that you install the following plugins</p><ul><li>Lombok - To reduce the amount of boiler-plate code that needs to be written</li><li>SonarLint - Fix and detect code quality issues (<a href="https://www.sonarlint.org/" target="_blank" rel="noopener noreferrer">https://www.sonarlint.org/</a>)</li><li>Spring Assistant - An IntelliJ plugin for aiding Spring development projects (<a href="https://plugins.jetbrains.com/plugin/10229-spring-assistant" target="_blank" rel="noopener noreferrer">https://plugins.jetbrains.com/plugin/10229-spring-assistant</a>)</li><li>Spring Tools - Adds Spring support for IDEs (<a href="https://spring.io/tools" target="_blank" rel="noopener noreferrer">https://spring.io/tools</a>)</li><li>CheckStyle - Flags up issues with coding style (<a href="https://checkstyle.sourceforge.io/" target="_blank" rel="noopener noreferrer">https://checkstyle.sourceforge.io/</a>)</li><li>google-java-format Formatter - Formats code according to configuration (<a href="https://github.com/amido/stacks-java/blob/master/tools/formatter/intellij-java-google-style.xml" target="_blank" rel="noopener noreferrer">https://github.com/amido/stacks-java/blob/master/tools/formatter/intellij-java-google-style.xml</a>)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="plugins-used-in-pom-xml"></a>PLUGINS USED IN POM XML<a aria-hidden="true" tabindex="-1" class="hash-link" href="#plugins-used-in-pom-xml" title="Direct link to heading">#</a></h3><ul><li>Lombok - Avoids need to write e.g. Getter, Setter, RequiredArgsConstructor, ToString, EqualsAndHashCode) in Java classes.</li><li>JaCoCo - A free Java code test coverage library.</li><li>Surefire - Used for reporting purposes (creates reports based on tests in the Java test package).</li><li>fmt-maven-plugin - Formats the java code based on rules in java-google-style.xml.</li><li>Spotbugs - Performs a static analysis of the Java code to check for bugs.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="code-quality"></a>CODE QUALITY<a aria-hidden="true" tabindex="-1" class="hash-link" href="#code-quality" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="formatter"></a>FORMATTER<a aria-hidden="true" tabindex="-1" class="hash-link" href="#formatter" title="Direct link to heading">#</a></h4><p>Install the <code>intellij-java-google-style.xml</code> formatter configuration file into the IDE from <a href="https://github.com/amido/stacks-java/blob/master/tools/formatter/intellij-java-google-style.xml" target="_blank" rel="noopener noreferrer">here</a>.</p><p>The Java source code will automatically be reformatted to comply with the <a href="https://google.github.io/styleguide/javaguide.html" target="_blank" rel="noopener noreferrer">Google Java Style</a>.</p><p>You can override the settings locally in the codebase by adding, for example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">//@formatter:off</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">manually formatted code</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">///@formatter:on</span></div></div></div></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="validating-and-applying-formatting"></a>VALIDATING AND APPLYING FORMATTING<a aria-hidden="true" tabindex="-1" class="hash-link" href="#validating-and-applying-formatting" title="Direct link to heading">#</a></h5><p>From the <code>&lt;PROJECT-NAME&gt;/java</code> folder run</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw com.coveo:fmt-maven-plugin:check</span></div></div></div></div></div><p>to validate the current formatting. You can then run</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw com.coveo:fmt-maven-plugin:format</span></div></div></div></div></div><p>to apply formatting to the source code.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="verifying-common-programming-flaws"></a>VERIFYING COMMON PROGRAMMING FLAWS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#verifying-common-programming-flaws" title="Direct link to heading">#</a></h5><p>From the <code>&lt;PROJECT-NAME&gt;/java</code> folder run</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw spotbugs:check</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="testing"></a>TESTING<a aria-hidden="true" tabindex="-1" class="hash-link" href="#testing" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="running-tests"></a>RUNNING TESTS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#running-tests" title="Direct link to heading">#</a></h3><p>Tests within the code are grouped using Tag annotations. There are three groups: &#x27;Unit&#x27;, &#x27;Component&#x27; and &#x27;Integration&#x27;. To just run the unit tests, for example, type:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw test -Dgroups=&quot;Unit&quot;</span></div></div></div></div></div><p>Similarly, for the Component tests, you should use:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw test -Dgroups=&quot;Component&quot;</span></div></div></div></div></div><p>and the equivalent for running the Integration tests.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="reports"></a>REPORTS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#reports" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="test-reports"></a>TEST REPORTS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#test-reports" title="Direct link to heading">#</a></h4><p>A test report may be created from the <code>test</code> package in Java using the Surefire Plugin.
The report file (as either XML or HTML) generated for each of the test classes can be found under <code>&lt;PROJECT-NAME&gt;/target/surefire-reports</code>.</p><p>Run the following command to create the report:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw surefire:test</span></div></div></div></div></div><p>To generate the Serenity report:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw clean verify</span></div></div></div></div></div><p>The report can be viewed under <code>&lt;PROJECT-NAME&gt;/api-tests/target/site/serenity/index.html</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="code-coverage--dependency-check-reports"></a>CODE COVERAGE &amp; DEPENDENCY CHECK REPORTS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#code-coverage--dependency-check-reports" title="Direct link to heading">#</a></h4><p>Run the following command:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw jacoco:report</span></div></div></div></div></div><p>The generated report can be viewed under <code>&lt;PROJECT-NAME&gt;/target/site/jacoco/index.html</code>.</p><p>For the dependency checker report, run:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw clean install -Powasp-dependency-check</span></div></div></div></div></div><p>The generated report can be viewed under <code>&lt;PROJECT-NAME&gt;/target/dependency-check.html</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mutation-testing"></a>MUTATION TESTING<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mutation-testing" title="Direct link to heading">#</a></h4><p>PIT mutation testing is used to generate mutation tests (see <a href="https://pitest.org/" target="_blank" rel="noopener noreferrer">https://pitest.org/</a> for details).
The mutation coverage goal analyses all classes in the codebase that match the target tests and target class filters.
To run it:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw org.pitest:pitest-maven:mutationCoverage</span></div></div></div></div></div><p>The generated report can be viewed under â€“ <code>&lt;PROJECT-NAME&gt;/target/pit-reports/YYYYMMDDHHMI</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="running-api-tests"></a>RUNNING API TESTS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#running-api-tests" title="Direct link to heading">#</a></h3><p>Set an environment variable <code>BASE_URL</code> (e.g. if testing locally set it to <a href="http://localhost:9000" target="_blank" rel="noopener noreferrer">http://localhost:9000</a>)</p><p>From project path <code>&lt;&gt;PROJECT-NAME&gt;/api-tests</code> to run all tests, use</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./mvnw clean verify</span></div></div></div></div></div><p>To run the Smoke tests independently, use</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mvn clean verify -Dcucumber.options=&quot;--tags @Smoke&quot;</span></div></div></div></div></div><p>and to run the Functional tests independently, use</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mvn clean verify -Dcucumber.options=&quot;--tags @Functional&quot;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="using-a-docker-image"></a>USING A DOCKER IMAGE<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-a-docker-image" title="Direct link to heading">#</a></h3><p>From the <code>&lt;PROJECT-NAME&gt;/java</code> folder, build a Docker image using e.g. the command below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker build --tag stacks:1.0 .</span></div></div></div></div></div><p>This uses the <code>Dockerfile</code> in this folder to generate the Docker image.</p><p>If you have an <code>.m2</code> directory in the <code>java/</code> folder, the Docker build will attempt to copy the files inside the container and use the cached versions.</p><p>Once the Docker image is created, you can then run a Docker container based on this image using e.g.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -p 9000:9000 -e AZURE_APPLICATION_INSIGHTS_INSTRUMENTATION_KEY -e AZURE_COSMOSDB_KEY stacks:1.0</span></div></div></div></div></div><p>which passes in the two required environment variables from your own environment.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="swaggeroas"></a>SWAGGER/OAS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#swaggeroas" title="Direct link to heading">#</a></h4><ul><li>Automatically generated for the project. Go to <a href="http://localhost:9000/swagger/index.html" target="_blank" rel="noopener noreferrer">Swagger Index</a> to view.</li><li>Swagger Json is here: <a href="http://localhost:9000/swagger/oas.json" target="_blank" rel="noopener noreferrer">Swagger Json</a></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="health-check"></a>HEALTH CHECK<a aria-hidden="true" tabindex="-1" class="hash-link" href="#health-check" title="Direct link to heading">#</a></h4><ul><li>Available at: <a href="http://localhost:9000/health" target="_blank" rel="noopener noreferrer">health check</a>
(This can also be configured to run on another port)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="using-the-scaffolding-cli-to-create-a-java-springboot-project-template"></a>USING THE SCAFFOLDING CLI TO CREATE A JAVA SPRINGBOOT PROJECT TEMPLATE<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-the-scaffolding-cli-to-create-a-java-springboot-project-template" title="Direct link to heading">#</a></h2><p>The Amido Stacks Scaffolding CLI can be used to create a fully-functional and deployable project from a template, in a variety of flavours.
It includes tests (unit, integration), together with infrastructure and deployment definitions. All by running from your CLI.</p><p>We use npx to execute and create the
<a href="https://www.npmjs.com/package/@amidostacks/scaffolding-cli" target="_blank" rel="noopener noreferrer">template-cli</a>
<a href="https://www.npmjs.com/package/npx" target="_blank" rel="noopener noreferrer">npx</a>.</p><p>We are supporting and running <a href="https://nodejs.org/en/about/releases/" target="_blank" rel="noopener noreferrer">node@12</a>.
Please ensure that your local environment has the correct version <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer">installed</a>.</p><p>To run the Scaffolding CLI, use the following commands</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-text codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npx @amidostacks/scaffolding-cli@latest run -i  </span></div></div></div></div></div><p>You will be asked a number of questions. Based on the answers, your ready-to-build project template will be produced.</p><p>An example is shown in the video below.</p><p><a href="https://asciinema.org/a/358208" target="_blank" rel="noopener noreferrer"><img src="https://asciinema.org/a/358208.svg" alt="asciicast"></a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/amido/stacks/docs/getting_started_dev_java.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/stacks/docs/getting_started_dev"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Dev [Node.js] - Using the repo to build the Node.js application</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/stacks/docs/getting_started_dev_dotnet"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Using the repo to build the Dotnet application locally Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#getting-started-with-the-java-springboot-application" class="table-of-contents__link">GETTING STARTED WITH THE JAVA SPRINGBOOT APPLICATION</a><ul><li><a href="#overview" class="table-of-contents__link">OVERVIEW</a></li><li><a href="#versioning" class="table-of-contents__link">VERSIONING</a></li><li><a href="#running-the-application-locally" class="table-of-contents__link">RUNNING THE APPLICATION LOCALLY</a></li><li><a href="#authorization" class="table-of-contents__link">AUTHORIZATION</a></li><li><a href="#ide-guidelines" class="table-of-contents__link">IDE GUIDELINES</a></li><li><a href="#plugins-used-in-pom-xml" class="table-of-contents__link">PLUGINS USED IN POM XML</a></li><li><a href="#code-quality" class="table-of-contents__link">CODE QUALITY</a></li></ul></li><li><a href="#testing" class="table-of-contents__link">TESTING</a><ul><li><a href="#running-tests" class="table-of-contents__link">RUNNING TESTS</a></li><li><a href="#reports" class="table-of-contents__link">REPORTS</a></li><li><a href="#running-api-tests" class="table-of-contents__link">RUNNING API TESTS</a></li><li><a href="#using-a-docker-image" class="table-of-contents__link">USING A DOCKER IMAGE</a></li></ul></li><li><a href="#using-the-scaffolding-cli-to-create-a-java-springboot-project-template" class="table-of-contents__link">USING THE SCAFFOLDING CLI TO CREATE A JAVA SPRINGBOOT PROJECT TEMPLATE</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/stacks/docs/">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">About Us</h4><ul class="footer__items"><li class="footer__item"><a href="https://amido.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Amido</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Open Source</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/amido/stacks" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Amido Ltd</div></div></div></footer></div>
<script src="/stacks/styles.0673dcca.js"></script>
<script src="/stacks/runtime~main.a0bc6fc3.js"></script>
<script src="/stacks/main.7a238d84.js"></script>
<script src="/stacks/1.328d9d07.js"></script>
<script src="/stacks/2.12addba4.js"></script>
<script src="/stacks/3.4373d897.js"></script>
<script src="/stacks/1be78505.16c4e985.js"></script>
<script src="/stacks/62.df314b90.js"></script>
<script src="/stacks/935f2afb.bd1b0fdf.js"></script>
<script src="/stacks/17896441.605a96b7.js"></script>
<script src="/stacks/663c3c70.5c608b80.js"></script>
</body>
</html>